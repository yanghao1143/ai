# 记忆衰减机制设计草案

## 问题
记忆文件会无限增长，但不是所有信息都值得永久保留。需要一个"优雅遗忘"机制。

## 核心思路：分层衰减

| 记忆类型 | 衰减速度 | 处理方式 |
|---------|---------|---------|
| **核心身份** | 永不衰减 | SOUL.md, IDENTITY.md |
| **重要决策** | 极慢 (年) | MEMORY.md 中的关键事件 |
| **日常记录** | 中等 (月) | memory/YYYY-MM-DD.md |
| **操作日志** | 快 (周) | 审计记录、扫描结果 |
| **临时笔记** | 极快 (天) | 草稿、中间状态 |

## 衰减不是删除

三阶段处理：
1. **压缩** — 详细记录 → 摘要
2. **归档** — 移到 archive/ 目录，不主动加载
3. **删除** — 只有确认无用的才真正删除

## 后悔机制

- 删除前先移到 `.trash/`，保留 30 天
- 如果被问到已删除的内容，尝试从 trash 恢复
- 记录"删错了"的案例，优化衰减规则

## 触发时机

- HEARTBEAT 定期检查（每周？）
- 文件大小超过阈值时
- 手动触发 `/memory cleanup`

## 待验证的假设

- [ ] 30 天未访问的记忆可以安全压缩
- [ ] 摘要能保留 80% 的有用信息
- [ ] 衰减规则需要根据实际使用调整

---

*这是探索性设计，需要实践验证*
