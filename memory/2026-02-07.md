# 2026-02-07 工作日志

## Skills 测试（完成）
- 测试了 39 个 skills
- 35 个可用（90%）
- 4 个需要额外配置：
  - elite-longterm-memory：需要 OPENAI_API_KEY + LanceDB（已配置基础版）
  - pr-reviewer：需要 gh CLI + GitHub auth
  - autonomous-agent：需要 MCP 配置
  - self-evolving-skill：包不完整，缺 core/ 目录

## 400 错误处理
- 部署了 auto-recover-400.sh 脚本（v4 精确匹配版）
- 发现两种 400：
  - **Mattermost 400**：消息格式问题，不损坏 session
  - **Anthropic 400**：tool_use 缺少 tool_result，会损坏 session
- 根因：工具参数写错（如 read 用 path 而不是 file_path）
- 解决：删除 session + 重启 gateway

## 团队协作
- oldking 能 SSH 到 employee2 (192.168.1.8) 远程修复问题
- employee2 频繁遇到 Mattermost 400（复杂格式消息）
- oldking 也遇到了 Anthropic 400（session 损坏）

## 工具参数教训（重要！）
- `read`: 用 `file_path`（不是 `path`）
- `write`: 只能用 `file_path`
- 参数错误会导致 tool_result 异常 → Anthropic 400 → session 损坏

## GitHub 认证问题
- gh CLI 需要浏览器授权
- jinyang 打不开浏览器
- MEMORY.md 里的 token 已过期
- 暂时跳过 pr-reviewer

## 机器 IP
- employee2: 192.168.1.8
- oldking: 192.168.1.2（物理机）
- haodaer: WSL

## 安全扫描（22:05）
- 运行了 `openclaw security audit --deep`
- 无木马迹象 ✅
- 所有端口绑定 127.0.0.1，无外网暴露
- 无可疑 SSH 后门
- 发现配置问题（非安全问题）：
  - Mattermost DM 开放
  - credentials 目录权限 755（应为 700）
  - Gateway token 太短

## 模型配置同步（22:14-22:35）
- jinyang 要求给所有 agent 配置统一模型
- 代理地址：`https://claude.chiddns.com`
- API Keys：
  - ANTHROPIC: sk-I6ukUQdDvYjZBdzDtDrQTreJ57ei7bSO3wwzDyuXTtCX3R5D
  - OPENAI: sk-MgjQOD5s4xdnBfueHBgAiCxrtvgfN0xU1J24SyRIl1JUMUu2

### 代理支持的模型（重要！）
查询 `/v1/models` 发现模型名要用**短名**，不带 provider 前缀：
- `claude-opus-4-5-20251101` ✅（不是 anthropic/claude-opus-4-5-20251101）
- `claude-sonnet-4-5-20250929` ✅
- `claude-haiku-4-5-20251001` ✅
- `claude-opus-4-6` ✅
- `gemini-3-pro-preview` ✅
- `gpt-5-codex` ✅

### 配置要点
- Anthropic 协议：baseUrl 不带 /v1
- OpenAI 协议：baseUrl 带 /v1
- 模型名用短名，不带 provider 前缀

### 状态
- haodaer: 已配置 ✅
- oldking: 待确认
- employee1: 待确认
- employee2: 配置完成，Gemini 可用，Opus 报错（模型名问题，正在修复）

## SSH 连接问题
- 我（haodaer）SSH 到 192.168.1.8 一直 "No route to host"
- oldking 可以 SSH 到 employee2
- 可能是 WSL 网络隔离问题

## 每日总结 (自动生成)
- 健康检查: 0 次
- 发现问题: 0 个
- Git 提交: 0 个
